<div class="new-user container">
    <h3>{{newUser.title}}</h3>
    <form name="userForm" autocomplete="off" novalidate>
        <div class="alert alert-danger" ng-if="newUser.error">
            {{newUser.error}}
        </div>
        <div ng-class="{ 'has-error': (userForm.familyName.$invalid && userForm.familyName.$touched) }">
            <label for="familyName">Vezetéknév<sup>*</sup></label>
            <input id="familyName" name="familyName" type="text" class="form-control" ng-model="newUser.user.familyName" required>
            <div ng-messages="userForm.familyName.$error" ng-if="userForm.familyName.$touched">
                <div class="help-block" ng-message="required">Kötelező megadni</div>
            </div>
        </div>
        <div ng-class="{ 'has-error': (userForm.givenName.$invalid && userForm.givenName.$touched) }">
            <label for="givenName">Keresztnév<sup>*</sup></label>
            <input id="givenName" name="givenName" type="text" class="form-control" ng-model="newUser.user.givenName" required>
            <div ng-messages="userForm.givenName.$error" ng-if="userForm.givenName.$touched">
                <div class="help-block" ng-message="required">Kötelező megadni</div>
            </div>
        </div>
        <div ng-class="{ 'has-error': (userForm.nickname.$invalid && userForm.nickname.$touched) }">
            <label for="nickname">Becenév</label>
            <input id="nickname" name="nickname" type="text" class="form-control" ng-model="newUser.user.nickname">
            <div ng-messages="userForm.nickname.$error" ng-if="userForm.nickname.$touched">
            </div>
        </div>
        <div ng-class="{ 'has-error': (userForm.email.$invalid && userForm.email.$touched) }">
            <label for="email">Email<sup>*</sup></label>
            <input id="email" name="email" type="email" class="form-control" ng-model="newUser.user.email" required>
            <div ng-messages="userForm.email.$error" ng-if="userForm.email.$touched">
                <div class="help-block" ng-message="required">Kötelező megadni</div>
                <div class="help-block" ng-message="email">Helytelen email cím formátum</div>
            </div>
        </div>
        <div ng-if="newUser.isAdmin">
            <label for="role">Szerep</label>
            <select id="role" name="role" 
                class="form-control"
                ng-model="newUser.role"
                ng-options="role.name for role in newUser.roles">
            </select>
        </div>
        <div ng-class="{ 'has-error': (userForm.address.$invalid && userForm.address.$touched) }">
            <label for="address">Számlázási cím</label>
            <input id="address" name="address" type="text" class="form-control" ng-model="newUser.user.address">
            <div ng-messages="userForm.address.$error" ng-if="userForm.address.$touched">
            </div>
        </div>
        <div ng-class="{ 'has-error': (userForm.phone.$invalid && userForm.phone.$touched) }">
            <label for="phone">Telefonszám</label>
            <input id="phone" name="phone" type="text" class="form-control" ng-model="newUser.user.phone">
            <div ng-messages="userForm.phone.$error" ng-if="userForm.phone.$touched">
            </div>
        </div>
        <div ng-if="newUser.isAdmin">
            <label for="coach">Oktató</label>
            <select id="coach" name="coach" 
                class="form-control"
                ng-model="newUser.coach"
                ng-options="coach.displayName for coach in newUser.coaches track by coach.id">
            </select>
        </div>
        <div>
            * Kötelező megadni
        </div>
        <button type="submit" class="btn btn-primary pull-right" ng-click="newUser.submit()" ng-disabled="userForm.$pristine || userForm.$invalid">Mentés</button>
    </form>
</div>
